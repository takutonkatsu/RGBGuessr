<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RGBGuessr</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=JetBrains+Mono:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="favicon.ico">
</head>
<body>

    <div class="bg-orb orb-1"></div>
    <div class="bg-orb orb-2"></div>

    <header class="app-header">
        <div class="logo" id="app-logo" onclick="app.showScreen('menu')">
            <span class="logo-r">R</span><span class="logo-g">G</span><span class="logo-b">B</span><span class="logo-light">Guessr</span>
        </div>
        <button id="back-btn" class="nav-btn hidden" onclick="app.showScreen('menu')">
            <span class="icon">✕</span> Close
        </button>
    </header>

    <main class="container">

        <section id="screen-menu" class="screen active fade-in">
            <div class="hero-section">
                <p class="hero-subtitle">Test your color sense.</p>
                <h1 class="hero-title">Master the <span class="char-r">R</span><span class="char-g">G</span><span class="char-b">B</span></h1>
            </div>

            <div class="menu-grid">
                <div class="game-card card-matching" onclick="app.startGame('matching')">
                    <div class="card-icon">🎯</div>
                    <div class="card-content">
                        <h3>Matching</h3>
                        <p>色を合わせて高得点を狙え</p>
                        <div class="record-badge" id="menu-matching-record">NO RECORD</div>
                    </div>
                </div>

                <div class="game-card card-original" onclick="app.startGame('original')">
                    <div class="card-icon">🧠</div>
                    <div class="card-content">
                        <h3>Original</h3>
                        <p>数値を推測するハードモード</p>
                        <div class="record-badge" id="menu-original-record">NO RECORD</div>
                    </div>
                </div>

                <div class="game-card card-challenge" onclick="app.startGame('challenge')">
                    <div class="card-icon">🔥</div>
                    <div class="card-content">
                        <h3>Challenge</h3>
                        <p>限界に挑む全25ステージ</p>
                        <div class="record-badge" id="menu-challenge-record">Start: Stage 1</div>
                    </div>
                </div>
            </div>

            <div id="another-world-entrance" class="hidden text-center" style="margin-top: 40px;">
                <button class="glitch-btn" onclick="app.startGame('anotherworld')">ENTER THE VOID</button>
            </div>
            
            <div id="god-badge-area" class="text-center" style="margin-top: 20px; opacity: 0.8;"></div>

            <div class="about-section">
                <div class="about-title">How to Play</div>
                <div class="about-card">
                    <h4>What is RGB?</h4>
                    <p>光の三原色（赤・緑・青）を0〜255の数値で表す色の表現方法です。このゲームでは、表示される色のRGB値を推測して、色彩感覚の限界に挑戦します。</p>
                </div>
                
                <div class="about-card about-matching">
                    <h4>MATCHING</h4>
                    <p>問題の色と同じ色を作ってください。色が近いほど高得点になります。素早く回答するとタイムボーナスが加算されます。</p>
                </div>

                <div class="about-card about-original">
                    <h4>ORIGINAL</h4>
                    <p>問題の色のRGB数値を推測します。色合わせはなく、純粋な数値入力のみのハードモードです。</p>
                </div>

                <div class="about-card about-challenge">
                    <h4>CHALLENGE</h4>
                    <p>全25ステージのクリアを目指します。ステージごとに設定されたGOALスコアを超えると次に進めます。一度でも失敗すると最初からです。</p>
                </div>

                <div class="about-card">
                    <h4>Ao5 System</h4>
                    <p>Ao5 (<span class="ao5-highlight">Average of 5</span>) とは、直近5回の記録のうち、最高点と最低点を除いた3回の平均値です。運要素を排除した真の実力を測定します。</p>
                </div>
            </div>
        </section>


        <section id="screen-matching" class="screen fade-in">
            <div class="game-header">
                <h2 class="game-title color-matching">Matching</h2>
                <div id="matching-timer" class="digital-timer">0.00</div>
            </div>

            <div class="color-display-area">
                <div class="color-panel">
                    <span class="panel-label">Target</span>
                    <div id="matching-question-color" class="color-box question-box">
                        <span class="overlay-text">?</span>
                    </div>
                </div>
                <div class="color-panel">
                    <span class="panel-label">Your Color</span>
                    <div id="matching-input-color" class="color-box answer-box"></div>
                </div>
            </div>

            <div class="slider-container glass-panel">
                <div class="slider-row">
                    <label class="label-r">R</label>
                    <input type="range" id="matching-R" class="custom-range range-r" min="0" max="255" value="128">
                    <span id="matching-val-R" class="val-num">128</span>
                </div>
                <div class="slider-row">
                    <label class="label-g">G</label>
                    <input type="range" id="matching-G" class="custom-range range-g" min="0" max="255" value="128">
                    <span id="matching-val-G" class="val-num">128</span>
                </div>
                <div class="slider-row">
                    <label class="label-b">B</label>
                    <input type="range" id="matching-B" class="custom-range range-b" min="0" max="255" value="128">
                    <span id="matching-val-B" class="val-num">128</span>
                </div>
            </div>

            <button id="matching-guess-btn" class="main-action-btn">GUESS</button>
        </section>

        <section id="screen-result-matching" class="screen fade-in result-screen">
            <h2 class="result-page-title">RESULT</h2>
            <div class="score-display">
                <span class="score-label">SCORE</span>
                <h1 id="matching-score">0</h1>
                <p id="matching-new-record" class="new-record">NEW RECORD!</p>
            </div>
            <p id="matching-score-detail" class="score-detail"></p>

            <div class="compare-row">
                <div class="compare-item">
                    <p class="compare-label">TARGET</p>
                    <div id="matching-ans-color" class="mini-box"></div>
                    <span id="matching-ans-text"></span>
                </div>
                <div class="arrow">→</div>
                <div class="compare-item">
                    <p class="compare-label">YOU</p>
                    <div id="matching-your-color" class="mini-box"></div>
                    <span id="matching-your-text"></span>
                </div>
            </div>

            <div class="stats-row">
                <div class="stat-box">
                    <span class="stat-label">👑 BEST</span>
                    <span id="matching-pb" class="stat-value highlight">--</span>
                </div>
                <div class="stat-box">
                    <span class="stat-label">📊 Ao5 BEST</span>
                    <span id="matching-ao5" class="stat-value highlight">--</span>
                </div>
            </div>

            <div class="modal-buttons">
                <button onclick="matchingGame.retry()" class="btn-primary">RETRY</button>
                <button onclick="matchingGame.resetData()" class="btn-text">Reset Data</button>
            </div>
            
            <div id="matching-history" class="history-log"></div>
        </section>


        <section id="screen-original" class="screen fade-in">
            <div class="game-header">
                <h2 class="game-title color-original">Original</h2>
            </div>

            <div class="single-color-display">
                <div id="original-question-color" class="color-box large-box">
                    <span class="overlay-text">?</span>
                </div>
            </div>

            <div class="slider-container glass-panel">
                <div class="slider-row">
                    <label class="label-r">R</label>
                    <input type="range" id="original-R" class="custom-range range-r" min="0" max="255" value="128">
                    <span id="original-val-R" class="val-num">128</span>
                </div>
                <div class="slider-row">
                    <label class="label-g">G</label>
                    <input type="range" id="original-G" class="custom-range range-g" min="0" max="255" value="128">
                    <span id="original-val-G" class="val-num">128</span>
                </div>
                <div class="slider-row">
                    <label class="label-b">B</label>
                    <input type="range" id="original-B" class="custom-range range-b" min="0" max="255" value="128">
                    <span id="original-val-B" class="val-num">128</span>
                </div>
            </div>

            <button id="original-guess-btn" class="main-action-btn">GUESS</button>
        </section>

        <section id="screen-result-original" class="screen fade-in result-screen">
            <h2 class="result-page-title">RESULT</h2>
            <div class="score-display">
                <span class="score-label">SCORE</span>
                <h1 id="original-score">0</h1>
                <p id="original-new-record" class="new-record">NEW RECORD!</p>
            </div>

            <div class="compare-row">
                <div class="compare-item">
                    <p class="compare-label">TARGET</p>
                    <div id="original-ans-color" class="mini-box"></div>
                    <span id="original-ans-text"></span>
                </div>
                <div class="compare-item">
                    <p class="compare-label">YOU</p>
                    <div id="original-your-color" class="mini-box"></div>
                    <span id="original-your-text"></span>
                </div>
            </div>

            <div class="stats-row">
                <div class="stat-box">
                    <span class="stat-label">👑 BEST</span>
                    <span id="original-pb" class="stat-value highlight">--</span>
                </div>
                <div class="stat-box">
                    <span class="stat-label">📊 Ao5 BEST</span>
                    <span id="original-ao5" class="stat-value highlight">--</span>
                </div>
            </div>

            <div class="modal-buttons">
                <button onclick="originalGame.retry()" class="btn-primary">RETRY</button>
                <button onclick="originalGame.resetData()" class="btn-text">Reset Data</button>
            </div>
            <div id="original-history" class="history-log"></div>
        </section>


        <section id="screen-challenge" class="screen fade-in">
            <div class="challenge-status-bar">
                <div class="challenge-info-top">
                    <div>
                        <div class="stage-title">STAGE</div>
                        <div id="challenge-stage-num" class="stage-number-big">01</div>
                    </div>
                    <div class="goal-display">
                        <div class="goal-label">TARGET SCORE</div>
                        <div id="challenge-aim-score" class="goal-val">1000</div>
                    </div>
                </div>
            </div>

            <div class="single-color-display">
                <div id="challenge-sample" class="color-box large-box"></div>
            </div>

            <div class="slider-container glass-panel">
                <div class="slider-row">
                    <label class="label-r">R</label>
                    <input type="range" id="challenge-R" class="custom-range range-r" min="0" max="255" value="128">
                    <span id="challenge-val-R" class="val-num">128</span>
                </div>
                <div class="slider-row">
                    <label class="label-g">G</label>
                    <input type="range" id="challenge-G" class="custom-range range-g" min="0" max="255" value="128">
                    <span id="challenge-val-G" class="val-num">128</span>
                </div>
                <div class="slider-row">
                    <label class="label-b">B</label>
                    <input type="range" id="challenge-B" class="custom-range range-b" min="0" max="255" value="128">
                    <span id="challenge-val-B" class="val-num">128</span>
                </div>
            </div>

            <button id="challenge-guess-btn" class="main-action-btn">GUESS</button>
        </section>

        <section id="screen-result-challenge" class="screen fade-in result-screen">
            <h2 id="challenge-score-text" class="result-title-big">Clear!</h2>
            <p id="challenge-new-record" class="new-record">NEW RECORD!</p>

            <div class="result-score-block">
                <div class="score-item">
                    <span class="label">SCORE</span>
                    <span id="challenge-result-score" class="val-score">0</span>
                </div>
                <div class="score-divider">/</div>
                <div class="score-item">
                    <span class="label">GOAL</span>
                    <span id="challenge-result-goal" class="val-goal">0</span>
                </div>
            </div>

            <div class="compare-row">
                <div class="compare-item">
                    <p class="compare-label">TARGET</p>
                    <div id="challenge-ans-color" class="mini-box"></div>
                    <span id="challenge-ans-text"></span>
                </div>
                <div class="compare-item">
                    <p class="compare-label">YOU</p>
                    <div id="challenge-your-color" class="mini-box"></div>
                    <span id="challenge-your-text"></span>
                </div>
            </div>

            <div class="stats-row">
                <div class="stat-box">
                    <span class="stat-label">🔥 MAX STAGE</span>
                    <span id="challenge-pb" class="stat-value highlight">--</span>
                </div>
            </div>

            <div class="modal-buttons">
                <button id="challenge-next-btn" onclick="challengeGame.next()" class="btn-primary">NEXT STAGE</button>
                <button onclick="challengeGame.resetData()" class="btn-text">Reset Data</button>
            </div>
            
            <div id="challenge-history" class="history-log"></div>
        </section>


        <section id="screen-anotherworld" class="screen fade-in">
            <h2 class="game-title glitch-text">The Void</h2>
            
            <div id="another-input-color" class="color-box large-box" style="border: 1px solid #333;"></div>

            <div class="slider-container glass-panel" style="border: 1px solid #333;">
                <div class="slider-row">
                    <label class="label-r">R</label>
                    <input type="range" id="another-R" class="custom-range range-mono" min="0" max="255" value="128">
                    <span id="another-val-R" class="val-num">128</span>
                </div>
                <div class="slider-row">
                    <label class="label-g">G</label>
                    <input type="range" id="another-G" class="custom-range range-mono" min="0" max="255" value="128">
                    <span id="another-val-G" class="val-num">128</span>
                </div>
                <div class="slider-row">
                    <label class="label-b">B</label>
                    <input type="range" id="another-B" class="custom-range range-mono" min="0" max="255" value="128">
                    <span id="another-val-B" class="val-num">128</span>
                </div>
            </div>

            <button onclick="anotherGame.saveColor()" class="main-action-btn btn-mono">SAVE COLOR</button>
            <button onclick="anotherGame.resetData()" class="btn-text" style="color:#666">Reset Memory</button>

            <div id="another-history" class="history-log" style="color: #666;"></div>
        </section>

    </main>

    <footer class="app-footer">
        <div class="copyright" onclick="app.triggerSecret()">&copy; 2023-2025 Takutonkatsu</div>
    </footer>
    
    <script src="script.js"></script>
</body>
</html>